:root{
  --bg:#1e1e1e;
  --fg:#e0e0e0;
  --muted:#999;
  --accent:#4aa3ff;
  --border:#333;
  --panel:#2a2a2a;
  --bubble-user:#3b3b3b;
  --bubble-llm:#2f3640;
  --font: system-ui, -apple-system, Segoe UI, sans-serif;
}

html,body{
  margin:0; padding:0;
  background:var(--bg); color:var(--fg);
  font-family:var(--font); font-size:15px;
  height:100%;
}
a{ color:var(--accent); }

.topbar{
  height:48px; background:#141414; border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:12px; padding:0 12px;
  position:sticky; top:0; z-index:10;
}
.brand{ font-weight:600; }
.project-chip{ background:var(--panel); padding:4px 8px; border-radius:6px; }
.model-select label{ margin-right:4px; font-size:13px; color:var(--muted);}
#btn-reset, #btn-agent-start{ background:var(--accent); border:none; padding:6px 10px; border-radius:6px; cursor:pointer; color:#fff; font-size:13px;}
#btn-reset{ background:#555; }
.agent-controls{ display:flex; align-items:center; gap:8px; }
.chip{ padding:2px 6px; border-radius:6px; background:#444; font-size:12px;}
.chip.muted{ background:#333; color:#777;}

.layout{
  display:grid; grid-template-columns:260px 1fr 320px; gap:0; height:calc(100vh - 48px);
}
.left, .right{
  overflow:auto; border-right:1px solid var(--border);
  padding:8px 10px;
}
.right{ border-right:none; border-left:1px solid var(--border); }
.center{
  display:flex; flex-direction:column; overflow:hidden;
}

/* Tabs */
.tabs{ display:flex; gap:6px; margin:8px 0;}
.tab-btn{
  background:#333; border:none; padding:6px 10px; border-radius:6px;
  cursor:pointer; color:#ccc; font-size:13px;
}
.tab-btn.active{ background:var(--accent); color:#fff; }
.tab-pane{ display:none; max-height:calc(100vh - 170px); overflow:auto; padding-right:4px;}
.tab-pane.active{ display:block; }

/* Lists */
.list{ list-style:none; margin:0; padding:0; }
.list li{ padding:4px 0; border-bottom:1px solid #2f2f2f; font-size:14px;}
.list li.clickable{ cursor:pointer; }
.list li:hover{ background:#2c2c2c; }

.muted{ color:var(--muted); }
.small{ font-size:12px; }
.pre-scroll{ white-space:pre-wrap; max-height:180px; overflow:auto; }

/* Chat */
.chat{
  flex:1; overflow:auto; padding:12px;
}
.msg{ margin-bottom:10px; display:flex; }
.msg.user{ justify-content:flex-end; }
.bubble{
  max-width:70%; padding:8px 12px; border-radius:10px;
  white-space:pre-wrap; line-height:1.35;
}
.msg.user .bubble{ background:var(--bubble-user); }
.msg.llm .bubble{ background:var(--bubble-llm); }

#composer{
  border-top:1px solid var(--border); padding:8px; display:flex; gap:8px;
}
#composer textarea{
  flex:1; resize:none; min-height:40px; max-height:120px; background:#2b2b2b; border:1px solid #444;
  color:var(--fg); border-radius:6px; padding:6px 8px; font-family:var(--font);
}
#composer button{
  background:var(--accent); border:none; color:#fff; padding:8px 12px; border-radius:6px; cursor:pointer;
}

/* Panels */
.panel{ margin-bottom:14px; background:var(--panel); padding:8px 10px; border-radius:8px; }
.panel h3{ margin:0 0 6px 0; font-size:15px; }

.tree{ list-style:none; padding-left:0; }
.tree li{ padding:2px 0; cursor:pointer; font-size:13px; }
.tree li.blob::before{ content:"üìÑ "; }
.tree li.tree::before{ content:"üìÅ "; }

.code-view{
  position:relative; background:#111; border-top:1px solid var(--border); max-height:40vh; overflow:auto;
}
.code-view header{
  position:sticky; top:0; display:flex; justify-content:space-between; align-items:center;
  background:#111; padding:4px 8px; border-bottom:1px solid var(--border); font-size:13px;
}
#code-content{ margin:0; padding:12px; white-space:pre; font-family:monospace; }

.hidden{ display:none !important; }

details summary{ cursor:pointer; margin-bottom:6px; }
#trace-content{ max-height:200px; overflow:auto; background:#111; padding:8px; border-radius:4px; }

input#proj-search{
  width:100%; margin-bottom:8px; padding:6px 8px; background:#2b2b2b; border:1px solid #444;
  color:#ccc; border-radius:6px; font-size:13px;
}
button.small{
  padding:4px 6px; font-size:11px; background:#444; color:#ccc; border:none; border-radius:4px; cursor:pointer; margin-right:4px;
}
